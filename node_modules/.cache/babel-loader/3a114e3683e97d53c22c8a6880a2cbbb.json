{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React, { useCallback, useState } from 'react';\nimport { uniqueId } from 'lodash';\nimport { createPortal } from 'react-dom';\nimport { usePubSub } from '../../hooks/usePubSub';\nimport { TOPICS } from './pubsub';\nimport { ToastConfigContext, ToastContext } from './ToastContext';\nimport { ToastList } from './ToastList';\nimport { isDismissable } from './utils';\nexport var ToastManager = function ToastManager(_ref) {\n  var children = _ref.children,\n      _ref$container = _ref.container,\n      container = _ref$container === void 0 ? document.body : _ref$container,\n      _ref$takeContainerWid = _ref.takeContainerWidth,\n      takeContainerWidth = _ref$takeContainerWid === void 0 ? false : _ref$takeContainerWid,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'fixed' : _ref$position;\n\n  var _useState = useState([]),\n      toasts = _useState[0],\n      setToasts = _useState[1];\n\n  var removeToast = useCallback(function (id) {\n    return setToasts(function (prevToasts) {\n      return prevToasts.filter(function (t) {\n        return t.id !== id;\n      });\n    });\n  }, []);\n  var showToast = useCallback(function (t) {\n    var toast = _extends({\n      dismissIn: 0,\n      id: uniqueId()\n    }, t);\n\n    var cleanup = function cleanup() {\n      return removeToast(toast.id);\n    };\n\n    setToasts(function (prevToasts) {\n      // Don't re-add a pre-existing toast to the list.\n      if (prevToasts.some(function (_ref2) {\n        var id = _ref2.id;\n        return id === toast.id;\n      })) {\n        return prevToasts;\n      }\n\n      return [].concat(prevToasts, [toast]);\n    }); // Only dismiss the toast if `dismissIn` is defined and greater than zero.\n\n    if (isDismissable(toast.dismissIn)) {\n      var timeoutIdx = window.setTimeout(function () {\n        cleanup();\n        window.clearTimeout(timeoutIdx);\n      }, toast.dismissIn);\n    } // Return the cleanup function which basically\n    // let you remove or dismiss the toast manually\n\n\n    return cleanup;\n  }, [removeToast]); // Handle events that are coming from outside the React Tree.\n\n  usePubSub(TOPICS.SHOW_TOAST, showToast);\n  usePubSub(TOPICS.REMOVE_TOAST, removeToast);\n  var containerNode = typeof container === 'function' ? container() : container;\n  return /*#__PURE__*/React.createElement(ToastConfigContext.Provider, {\n    value: {\n      takeContainerWidth: takeContainerWidth,\n      position: position\n    }\n  }, /*#__PURE__*/React.createElement(ToastContext.Provider, {\n    value: {\n      toasts: toasts,\n      showToast: showToast,\n      removeToast: removeToast\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, children, containerNode && /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(ToastList, null), containerNode))));\n};","map":{"version":3,"sources":["/Users/dinnosivagnanam/Development/Aircall-FrontEnd/node_modules/@aircall/tractor/es/components/Toast/ToastManager.js"],"names":["_extends","React","useCallback","useState","uniqueId","createPortal","usePubSub","TOPICS","ToastConfigContext","ToastContext","ToastList","isDismissable","ToastManager","_ref","children","_ref$container","container","document","body","_ref$takeContainerWid","takeContainerWidth","_ref$position","position","_useState","toasts","setToasts","removeToast","id","prevToasts","filter","t","showToast","toast","dismissIn","cleanup","some","_ref2","concat","timeoutIdx","window","setTimeout","clearTimeout","SHOW_TOAST","REMOVE_TOAST","containerNode","createElement","Provider","value","Fragment"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport React, { useCallback, useState } from 'react';\nimport { uniqueId } from 'lodash';\nimport { createPortal } from 'react-dom';\nimport { usePubSub } from '../../hooks/usePubSub';\nimport { TOPICS } from './pubsub';\nimport { ToastConfigContext, ToastContext } from './ToastContext';\nimport { ToastList } from './ToastList';\nimport { isDismissable } from './utils';\nexport var ToastManager = function ToastManager(_ref) {\n  var children = _ref.children,\n      _ref$container = _ref.container,\n      container = _ref$container === void 0 ? document.body : _ref$container,\n      _ref$takeContainerWid = _ref.takeContainerWidth,\n      takeContainerWidth = _ref$takeContainerWid === void 0 ? false : _ref$takeContainerWid,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'fixed' : _ref$position;\n\n  var _useState = useState([]),\n      toasts = _useState[0],\n      setToasts = _useState[1];\n\n  var removeToast = useCallback(function (id) {\n    return setToasts(function (prevToasts) {\n      return prevToasts.filter(function (t) {\n        return t.id !== id;\n      });\n    });\n  }, []);\n  var showToast = useCallback(function (t) {\n    var toast = _extends({\n      dismissIn: 0,\n      id: uniqueId()\n    }, t);\n\n    var cleanup = function cleanup() {\n      return removeToast(toast.id);\n    };\n\n    setToasts(function (prevToasts) {\n      // Don't re-add a pre-existing toast to the list.\n      if (prevToasts.some(function (_ref2) {\n        var id = _ref2.id;\n        return id === toast.id;\n      })) {\n        return prevToasts;\n      }\n\n      return [].concat(prevToasts, [toast]);\n    }); // Only dismiss the toast if `dismissIn` is defined and greater than zero.\n\n    if (isDismissable(toast.dismissIn)) {\n      var timeoutIdx = window.setTimeout(function () {\n        cleanup();\n        window.clearTimeout(timeoutIdx);\n      }, toast.dismissIn);\n    } // Return the cleanup function which basically\n    // let you remove or dismiss the toast manually\n\n\n    return cleanup;\n  }, [removeToast]); // Handle events that are coming from outside the React Tree.\n\n  usePubSub(TOPICS.SHOW_TOAST, showToast);\n  usePubSub(TOPICS.REMOVE_TOAST, removeToast);\n  var containerNode = typeof container === 'function' ? container() : container;\n  return /*#__PURE__*/React.createElement(ToastConfigContext.Provider, {\n    value: {\n      takeContainerWidth: takeContainerWidth,\n      position: position\n    }\n  }, /*#__PURE__*/React.createElement(ToastContext.Provider, {\n    value: {\n      toasts: toasts,\n      showToast: showToast,\n      removeToast: removeToast\n    }\n  }, /*#__PURE__*/React.createElement(React.Fragment, null, children, containerNode && /*#__PURE__*/createPortal( /*#__PURE__*/React.createElement(ToastList, null), containerNode))));\n};"]},"metadata":{},"sourceType":"module"}
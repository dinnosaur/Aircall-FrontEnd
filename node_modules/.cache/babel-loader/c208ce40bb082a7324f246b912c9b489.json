{"ast":null,"code":"import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport { Box, MotionBox } from '..';\nimport { useTrigger } from '../../hooks';\nimport { useForm } from '../../hooks/useForm';\nimport { BoundaryAlignment } from '../BoundaryAlignment';\nimport { getOffset } from '../Dropdown/utils';\nimport { Typography } from '../Typography';\nimport { Loading } from './components/Loading';\nimport { SearchInput } from './components/SelectInput';\nimport { SelectMenu } from './components/SelectMenu';\nimport { DropdownContainer, TriggerContainer } from './components/styled';\nimport { ValueContainer } from './components/ValueContainer';\nimport { calculateDropdownMaxHeight } from './utils';\nimport { optionValue } from './utils';\n\nfunction initSelectedValue(value, isMulti) {\n  if (isMulti === void 0) {\n    isMulti = false;\n  }\n\n  if (!value) return isMulti ? [] : null;\n\n  if (isMulti) {\n    var multiValues = Array.isArray(value) ? value : [value];\n    return multiValues;\n  }\n\n  var singleValue = Array.isArray(value) ? value.length > 0 ? value[0] : null : value;\n  return singleValue;\n}\n\nexport var Select = function Select(_ref) {\n  var options = _ref.options,\n      placeholder = _ref.placeholder,\n      getOptionLabel = _ref.getOptionLabel,\n      getOptionValue = _ref.getOptionValue,\n      size = _ref.size,\n      value = _ref.value,\n      onChange = _ref.onChange,\n      onSearch = _ref.onSearch,\n      mode = _ref.mode,\n      _ref$components = _ref.components,\n      components = _ref$components === void 0 ? {} : _ref$components,\n      _ref$searchable = _ref.searchable,\n      searchable = _ref$searchable === void 0 ? false : _ref$searchable,\n      _ref$loading = _ref.loading,\n      loading = _ref$loading === void 0 ? false : _ref$loading,\n      _ref$noOptionsLabel = _ref.noOptionsLabel,\n      noOptionsLabel = _ref$noOptionsLabel === void 0 ? 'No options' : _ref$noOptionsLabel,\n      _ref$menuIsOpen = _ref.menuIsOpen,\n      menuIsOpen = _ref$menuIsOpen === void 0 ? false : _ref$menuIsOpen,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? '100%' : _ref$width,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'bottom' : _ref$position,\n      _ref$anchor = _ref.anchor,\n      anchor = _ref$anchor === void 0 ? 'start' : _ref$anchor,\n      _ref$boundaryElement = _ref.boundaryElement,\n      boundaryElement = _ref$boundaryElement === void 0 ? window : _ref$boundaryElement,\n      _ref$loadingText = _ref.loadingText,\n      loadingText = _ref$loadingText === void 0 ? 'Loading results' : _ref$loadingText,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$dataTest = _ref['data-test'],\n      dataTest = _ref$dataTest === void 0 ? 'select-trigger-container' : _ref$dataTest,\n      validationStatus = _ref.validationStatus;\n  var isMulti = mode === 'multiple';\n\n  var _useState = useState(initSelectedValue(value, isMulti)),\n      selectedValue = _useState[0],\n      setSelectedValue = _useState[1];\n\n  var _useState2 = useState(''),\n      searchText = _useState2[0],\n      setSearchText = _useState2[1];\n\n  var _useState3 = useState(position),\n      internalPosition = _useState3[0],\n      setInternalPosition = _useState3[1];\n\n  var _useForm = useForm({\n    size: size,\n    validationStatus: validationStatus\n  }),\n      componentSize = _useForm.componentSize,\n      componentStatus = _useForm.componentStatus;\n\n  useEffect(function () {\n    setSelectedValue(initSelectedValue(value, isMulti));\n  }, [value, isMulti]);\n  var Trigger = components.Trigger,\n      OptionComponent = components.Option;\n  var triggerComponent = useMemo(function () {\n    return Trigger ? /*#__PURE__*/React.createElement(Trigger, {\n      value: selectedValue,\n      disabled: disabled,\n      \"data-test\": dataTest\n    }) : /*#__PURE__*/React.createElement(TriggerContainer, {\n      triggerSize: componentSize,\n      validationStatus: componentStatus,\n      \"data-test\": dataTest,\n      width: width,\n      disabled: disabled\n    }, !selectedValue || Array.isArray(selectedValue) && selectedValue.length === 0 ? /*#__PURE__*/React.createElement(Typography, {\n      color: \"text.dark\"\n    }, placeholder) : /*#__PURE__*/React.createElement(ValueContainer, {\n      value: selectedValue,\n      getOptionLabel: getOptionLabel\n    }));\n  }, [Trigger, selectedValue, componentSize, componentStatus, width, placeholder, getOptionLabel, disabled, dataTest]);\n\n  var _useTrigger = useTrigger(triggerComponent, {\n    trigger: 'click',\n    closeOnInsideClick: false,\n    visible: menuIsOpen\n  }),\n      trigger = _useTrigger[0],\n      _useTrigger$ = _useTrigger[1],\n      isVisible = _useTrigger$.isVisible,\n      containerBoundingBox = _useTrigger$.containerBoundingBox,\n      portal = _useTrigger$.portal,\n      close = _useTrigger$.close;\n\n  var updateSelectedValue = useCallback(function (option) {\n    !isMulti && close();\n    var updatedValue;\n\n    if (isMulti && Array.isArray(selectedValue)) {\n      var foundIdx = selectedValue.findIndex(function (selectedOption) {\n        return optionValue(selectedOption, getOptionValue) === optionValue(option, getOptionValue);\n      });\n      updatedValue = foundIdx > -1 ? [].concat(selectedValue.slice(0, foundIdx), selectedValue.slice(foundIdx + 1)) : [].concat(selectedValue, [option]);\n    } else {\n      updatedValue = option;\n    } // as uncontrolled component, call setSeletedValue\n\n\n    value === undefined && setSelectedValue(updatedValue);\n    onChange && onChange(updatedValue);\n  }, [close, getOptionValue, isMulti, onChange, selectedValue, value]);\n  var offset = useMemo(function () {\n    return getOffset(position);\n  }, [position]);\n  var maxHeight = useMemo(function () {\n    return calculateDropdownMaxHeight({\n      boundaryElement: boundaryElement,\n      containerBoundingBox: containerBoundingBox,\n      position: internalPosition,\n      offset: offset\n    });\n  }, [boundaryElement, containerBoundingBox, internalPosition, offset]);\n  var onSearchInputChange = useCallback(function (value) {\n    setSearchText(value);\n    onSearch == null ? void 0 : onSearch(value);\n  }, [onSearch]);\n  var handleComputePlacement = useCallback(function (placements) {\n    setInternalPosition(placements.position);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, trigger, isVisible && portal( /*#__PURE__*/React.createElement(BoundaryAlignment, {\n    containerBoundingBox: containerBoundingBox,\n    boundaryElement: boundaryElement,\n    onComputePlacement: handleComputePlacement,\n    position: position,\n    offset: offset,\n    anchor: anchor\n  }, /*#__PURE__*/React.createElement(MotionBox, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0\n    }\n  }, /*#__PURE__*/React.createElement(DropdownContainer, {\n    width: containerBoundingBox.width,\n    maxHeight: maxHeight,\n    \"data-test\": \"select-dropdown-container\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    py: \"xs\",\n    overflow: \"auto\"\n  }, loading ? /*#__PURE__*/React.createElement(Loading, {\n    loadingText: loadingText,\n    size: componentSize\n  }) : options.length === 0 ? /*#__PURE__*/React.createElement(Typography, {\n    pl: \"s\",\n    variant: \"body2\",\n    py: \"xxs\"\n  }, noOptionsLabel) : /*#__PURE__*/React.createElement(SelectMenu, {\n    options: options,\n    size: componentSize,\n    isMulti: isMulti,\n    onSelect: updateSelectedValue,\n    getOptionValue: getOptionValue,\n    getOptionLabel: getOptionLabel,\n    optionComponent: OptionComponent,\n    selectedValue: selectedValue\n  })), searchable && /*#__PURE__*/React.createElement(Box, {\n    order: internalPosition === 'bottom' ? -1 : 1\n  }, /*#__PURE__*/React.createElement(SearchInput, {\n    dropdownPosition: internalPosition,\n    onChange: onSearchInputChange,\n    value: searchText,\n    size: componentSize\n  })))))));\n};","map":{"version":3,"sources":["/Users/dinnosivagnanam/Development/Aircall-FrontEnd/node_modules/@aircall/tractor/es/components/Select/Select.js"],"names":["React","useEffect","useState","useCallback","useMemo","Box","MotionBox","useTrigger","useForm","BoundaryAlignment","getOffset","Typography","Loading","SearchInput","SelectMenu","DropdownContainer","TriggerContainer","ValueContainer","calculateDropdownMaxHeight","optionValue","initSelectedValue","value","isMulti","multiValues","Array","isArray","singleValue","length","Select","_ref","options","placeholder","getOptionLabel","getOptionValue","size","onChange","onSearch","mode","_ref$components","components","_ref$searchable","searchable","_ref$loading","loading","_ref$noOptionsLabel","noOptionsLabel","_ref$menuIsOpen","menuIsOpen","_ref$width","width","_ref$position","position","_ref$anchor","anchor","_ref$boundaryElement","boundaryElement","window","_ref$loadingText","loadingText","_ref$disabled","disabled","_ref$dataTest","dataTest","validationStatus","_useState","selectedValue","setSelectedValue","_useState2","searchText","setSearchText","_useState3","internalPosition","setInternalPosition","_useForm","componentSize","componentStatus","Trigger","OptionComponent","Option","triggerComponent","createElement","triggerSize","color","_useTrigger","trigger","closeOnInsideClick","visible","_useTrigger$","isVisible","containerBoundingBox","portal","close","updateSelectedValue","option","updatedValue","foundIdx","findIndex","selectedOption","concat","slice","undefined","offset","maxHeight","onSearchInputChange","handleComputePlacement","placements","Fragment","onComputePlacement","initial","opacity","animate","exit","py","overflow","pl","variant","onSelect","optionComponent","order","dropdownPosition"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback, useMemo } from 'react';\nimport { Box, MotionBox } from '..';\nimport { useTrigger } from '../../hooks';\nimport { useForm } from '../../hooks/useForm';\nimport { BoundaryAlignment } from '../BoundaryAlignment';\nimport { getOffset } from '../Dropdown/utils';\nimport { Typography } from '../Typography';\nimport { Loading } from './components/Loading';\nimport { SearchInput } from './components/SelectInput';\nimport { SelectMenu } from './components/SelectMenu';\nimport { DropdownContainer, TriggerContainer } from './components/styled';\nimport { ValueContainer } from './components/ValueContainer';\nimport { calculateDropdownMaxHeight } from './utils';\nimport { optionValue } from './utils';\n\nfunction initSelectedValue(value, isMulti) {\n  if (isMulti === void 0) {\n    isMulti = false;\n  }\n\n  if (!value) return isMulti ? [] : null;\n\n  if (isMulti) {\n    var multiValues = Array.isArray(value) ? value : [value];\n    return multiValues;\n  }\n\n  var singleValue = Array.isArray(value) ? value.length > 0 ? value[0] : null : value;\n  return singleValue;\n}\n\nexport var Select = function Select(_ref) {\n  var options = _ref.options,\n      placeholder = _ref.placeholder,\n      getOptionLabel = _ref.getOptionLabel,\n      getOptionValue = _ref.getOptionValue,\n      size = _ref.size,\n      value = _ref.value,\n      onChange = _ref.onChange,\n      onSearch = _ref.onSearch,\n      mode = _ref.mode,\n      _ref$components = _ref.components,\n      components = _ref$components === void 0 ? {} : _ref$components,\n      _ref$searchable = _ref.searchable,\n      searchable = _ref$searchable === void 0 ? false : _ref$searchable,\n      _ref$loading = _ref.loading,\n      loading = _ref$loading === void 0 ? false : _ref$loading,\n      _ref$noOptionsLabel = _ref.noOptionsLabel,\n      noOptionsLabel = _ref$noOptionsLabel === void 0 ? 'No options' : _ref$noOptionsLabel,\n      _ref$menuIsOpen = _ref.menuIsOpen,\n      menuIsOpen = _ref$menuIsOpen === void 0 ? false : _ref$menuIsOpen,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? '100%' : _ref$width,\n      _ref$position = _ref.position,\n      position = _ref$position === void 0 ? 'bottom' : _ref$position,\n      _ref$anchor = _ref.anchor,\n      anchor = _ref$anchor === void 0 ? 'start' : _ref$anchor,\n      _ref$boundaryElement = _ref.boundaryElement,\n      boundaryElement = _ref$boundaryElement === void 0 ? window : _ref$boundaryElement,\n      _ref$loadingText = _ref.loadingText,\n      loadingText = _ref$loadingText === void 0 ? 'Loading results' : _ref$loadingText,\n      _ref$disabled = _ref.disabled,\n      disabled = _ref$disabled === void 0 ? false : _ref$disabled,\n      _ref$dataTest = _ref['data-test'],\n      dataTest = _ref$dataTest === void 0 ? 'select-trigger-container' : _ref$dataTest,\n      validationStatus = _ref.validationStatus;\n  var isMulti = mode === 'multiple';\n\n  var _useState = useState(initSelectedValue(value, isMulti)),\n      selectedValue = _useState[0],\n      setSelectedValue = _useState[1];\n\n  var _useState2 = useState(''),\n      searchText = _useState2[0],\n      setSearchText = _useState2[1];\n\n  var _useState3 = useState(position),\n      internalPosition = _useState3[0],\n      setInternalPosition = _useState3[1];\n\n  var _useForm = useForm({\n    size: size,\n    validationStatus: validationStatus\n  }),\n      componentSize = _useForm.componentSize,\n      componentStatus = _useForm.componentStatus;\n\n  useEffect(function () {\n    setSelectedValue(initSelectedValue(value, isMulti));\n  }, [value, isMulti]);\n  var Trigger = components.Trigger,\n      OptionComponent = components.Option;\n  var triggerComponent = useMemo(function () {\n    return Trigger ? /*#__PURE__*/React.createElement(Trigger, {\n      value: selectedValue,\n      disabled: disabled,\n      \"data-test\": dataTest\n    }) : /*#__PURE__*/React.createElement(TriggerContainer, {\n      triggerSize: componentSize,\n      validationStatus: componentStatus,\n      \"data-test\": dataTest,\n      width: width,\n      disabled: disabled\n    }, !selectedValue || Array.isArray(selectedValue) && selectedValue.length === 0 ? /*#__PURE__*/React.createElement(Typography, {\n      color: \"text.dark\"\n    }, placeholder) : /*#__PURE__*/React.createElement(ValueContainer, {\n      value: selectedValue,\n      getOptionLabel: getOptionLabel\n    }));\n  }, [Trigger, selectedValue, componentSize, componentStatus, width, placeholder, getOptionLabel, disabled, dataTest]);\n\n  var _useTrigger = useTrigger(triggerComponent, {\n    trigger: 'click',\n    closeOnInsideClick: false,\n    visible: menuIsOpen\n  }),\n      trigger = _useTrigger[0],\n      _useTrigger$ = _useTrigger[1],\n      isVisible = _useTrigger$.isVisible,\n      containerBoundingBox = _useTrigger$.containerBoundingBox,\n      portal = _useTrigger$.portal,\n      close = _useTrigger$.close;\n\n  var updateSelectedValue = useCallback(function (option) {\n    !isMulti && close();\n    var updatedValue;\n\n    if (isMulti && Array.isArray(selectedValue)) {\n      var foundIdx = selectedValue.findIndex(function (selectedOption) {\n        return optionValue(selectedOption, getOptionValue) === optionValue(option, getOptionValue);\n      });\n      updatedValue = foundIdx > -1 ? [].concat(selectedValue.slice(0, foundIdx), selectedValue.slice(foundIdx + 1)) : [].concat(selectedValue, [option]);\n    } else {\n      updatedValue = option;\n    } // as uncontrolled component, call setSeletedValue\n\n\n    value === undefined && setSelectedValue(updatedValue);\n    onChange && onChange(updatedValue);\n  }, [close, getOptionValue, isMulti, onChange, selectedValue, value]);\n  var offset = useMemo(function () {\n    return getOffset(position);\n  }, [position]);\n  var maxHeight = useMemo(function () {\n    return calculateDropdownMaxHeight({\n      boundaryElement: boundaryElement,\n      containerBoundingBox: containerBoundingBox,\n      position: internalPosition,\n      offset: offset\n    });\n  }, [boundaryElement, containerBoundingBox, internalPosition, offset]);\n  var onSearchInputChange = useCallback(function (value) {\n    setSearchText(value);\n    onSearch == null ? void 0 : onSearch(value);\n  }, [onSearch]);\n  var handleComputePlacement = useCallback(function (placements) {\n    setInternalPosition(placements.position);\n  }, []);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, trigger, isVisible && portal( /*#__PURE__*/React.createElement(BoundaryAlignment, {\n    containerBoundingBox: containerBoundingBox,\n    boundaryElement: boundaryElement,\n    onComputePlacement: handleComputePlacement,\n    position: position,\n    offset: offset,\n    anchor: anchor\n  }, /*#__PURE__*/React.createElement(MotionBox, {\n    initial: {\n      opacity: 0\n    },\n    animate: {\n      opacity: 1\n    },\n    exit: {\n      opacity: 0\n    }\n  }, /*#__PURE__*/React.createElement(DropdownContainer, {\n    width: containerBoundingBox.width,\n    maxHeight: maxHeight,\n    \"data-test\": \"select-dropdown-container\"\n  }, /*#__PURE__*/React.createElement(Box, {\n    py: \"xs\",\n    overflow: \"auto\"\n  }, loading ? /*#__PURE__*/React.createElement(Loading, {\n    loadingText: loadingText,\n    size: componentSize\n  }) : options.length === 0 ? /*#__PURE__*/React.createElement(Typography, {\n    pl: \"s\",\n    variant: \"body2\",\n    py: \"xxs\"\n  }, noOptionsLabel) : /*#__PURE__*/React.createElement(SelectMenu, {\n    options: options,\n    size: componentSize,\n    isMulti: isMulti,\n    onSelect: updateSelectedValue,\n    getOptionValue: getOptionValue,\n    getOptionLabel: getOptionLabel,\n    optionComponent: OptionComponent,\n    selectedValue: selectedValue\n  })), searchable && /*#__PURE__*/React.createElement(Box, {\n    order: internalPosition === 'bottom' ? -1 : 1\n  }, /*#__PURE__*/React.createElement(SearchInput, {\n    dropdownPosition: internalPosition,\n    onChange: onSearchInputChange,\n    value: searchText,\n    size: componentSize\n  })))))));\n};"]},"metadata":{},"sourceType":"module"}
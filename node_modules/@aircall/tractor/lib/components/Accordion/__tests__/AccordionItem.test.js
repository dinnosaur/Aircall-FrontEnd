"use strict";

var _react = _interopRequireDefault(require("react"));

var _react2 = require("@testing-library/react");

var _AccordionBody = require("../AccordionBody");

var _AccordionItem = require("../AccordionItem");

var _context = require("../context");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

describe('components/Accordion/AccordionItem', function () {
  it('should provide the id to the children through context', function () {
    var _subContext, _subContext2;

    var subContext;

    function ContextConsumer() {
      return /*#__PURE__*/_react["default"].createElement(_context.AccordionSubContext.Consumer, null, function (context) {
        subContext = context;
        return 'Test';
      });
    }

    var _render = (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_context.AccordionMainContext.Provider, {
      value: {
        selectedItemId: 1
      }
    }, /*#__PURE__*/_react["default"].createElement(_AccordionItem.AccordionItem, {
      id: 1
    }, /*#__PURE__*/_react["default"].createElement(_AccordionBody.AccordionBody, null, /*#__PURE__*/_react["default"].createElement(ContextConsumer, null))))),
        rerender = _render.rerender;

    expect((_subContext = subContext) == null ? void 0 : _subContext.id).toEqual(1);
    rerender( /*#__PURE__*/_react["default"].createElement(_context.AccordionMainContext.Provider, {
      value: {
        selectedItemId: 2
      }
    }, /*#__PURE__*/_react["default"].createElement(_AccordionItem.AccordionItem, {
      id: 2
    }, /*#__PURE__*/_react["default"].createElement(_AccordionBody.AccordionBody, null, /*#__PURE__*/_react["default"].createElement(ContextConsumer, null)))));
    expect((_subContext2 = subContext) == null ? void 0 : _subContext2.id).toEqual(2);
  });
  it('should not accept anything else than AccordionBody or AccordionHeader', function () {
    function DummyComponent() {
      return /*#__PURE__*/_react["default"].createElement("div", null);
    }

    DummyComponent.displayName = 'DummyComponent';
    expect(function () {
      return (0, _react2.render)( /*#__PURE__*/_react["default"].createElement(_AccordionItem.AccordionItem, {
        id: 1
      }, /*#__PURE__*/_react["default"].createElement(DummyComponent, null)));
    }).toThrowError('AccodionItem only allows AccordionHeader, AccordionBody as immediate children. Found invalid child DummyComponent.');
  });
});
"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.useCloseOnScroll = void 0;

var _react = require("react");

var useCloseOnScroll = function useCloseOnScroll(options) {
  var container = options.container,
      node = options.node,
      onClose = options.onClose;
  /**
   * Invoke the callback when the user scrolls outside of the node.
   */

  var handleScroll = (0, _react.useCallback)(function (event) {
    var target = event.target;
    var hasScrolledInsideOfPortal = node.contains(target);

    if (!hasScrolledInsideOfPortal) {
      onClose();
    }
  }, [node, onClose]);
  (0, _react.useEffect)(function () {
    if (!node) {
      return;
    } // the 3rd option of the addEventListener indicate that the scroll event
    // will be bubbled upward through the DOM tree


    container.addEventListener('scroll', handleScroll, true);
    return function () {
      container.removeEventListener('scroll', handleScroll, true);
    };
  }, [container, handleScroll, node]);
};

exports.useCloseOnScroll = useCloseOnScroll;